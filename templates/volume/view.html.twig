{% extends 'base.html.twig' %}
{% block title %}Research database -> {{ series.name }} {% endblock %}

{% block body %}

    <div id="index_area">

        <?php if($parent_archive&&($serie['id']!=452&&$serie['id']!=453)):?>
        {% if series.archive %}
            Parent archive:
            <a href="{{ path('archive_view', {'archive_id':series.archive.id}) }}">
                {{ series.archive.name }}
            </a><br>
        {% endif %}
        {% if series.parent %}
            Parent series:
            <a href="{{ path('series_view', {'series_id':series.parent.id}) }}">
                {{ series.parent.name }}
            </a>
        {% endif %}

        <h3>{{ series.name }}</h3>

        {% import "series/seriesHierarchy.html.twig" as seriesList %}
        {{ seriesList.seriesHierarchy(series.children) }}

        <h3>Volumes in series</h3>
        <table id="volume_index" class="index">
            <tr id="header_row">
                <th>Code</th><th>Time</th><th>Notes</th><th>#Sources</th><th></th>
            </tr>
            {% for volume in series.volumes %}
                <tr>
                    <td>
                        <a href="{{ path('volume_view', {'volume_id':volume.id}) }}">
                            {{ volume.abbreviation }} {% if volume.name %} {{ volume.name }} {% endif %}
                        </a>
                    </td>
                    <td>
                        {% if volume.start_date %} ({{volume.fuzzyStartDate.dateString}}{% endif %}{% if volume.start_date %} â€” {{ volume.fuzzyEndDate.dateString }}{% endif %} {% if volume.startDate or volume.endDate %}){% endif %}
                    </td>
                    <td>
                        <?php echo $volume['description'];?>
                    </td>
                    <td>
                        <?php echo $volume['#sources'];?>
                    </td>
                    <td>
                        <a href="/research-database/index.php/volumes/delete/<? echo $volume['id'];?>" onclick="return confirmDelete('volume');">Delete</a>
                    </td>
                </tr>
            {% endfor %}
    </div>

{% endblock %}

{% block javascripts %}
    <script type="text/javascript">
        function confirmDelete() {
            return confirm('Are you sure you want to delete this archive?');
        }
    </script>
{% endblock %}